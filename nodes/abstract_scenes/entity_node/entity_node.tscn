[gd_scene load_steps=12 format=3 uid="uid://dml5uy4doh7s6"]

[ext_resource type="Script" path="res://nodes/abstract_scenes/entity_node/entity_node.gd" id="1_ljx5x"]
[ext_resource type="PackedScene" uid="uid://cf3hc58pq1vru" path="res://nodes/tools/hitbox/hitbox.tscn" id="2_qnb1g"]
[ext_resource type="PackedScene" uid="uid://w717b0uhklq" path="res://nodes/tools/interactable_box/interactable_box.tscn" id="2_s834e"]
[ext_resource type="Script" path="res://addons/godot_state_charts/state_chart.gd" id="3_pi3qr"]
[ext_resource type="PackedScene" uid="uid://m4km4ixwc3e3" path="res://addons/macchi's_nodecomponents/components/movement_component/movement_component.tscn" id="4_wexpm"]
[ext_resource type="Script" path="res://addons/godot_state_charts/compound_state.gd" id="5_d0dfx"]
[ext_resource type="PackedScene" uid="uid://b5du1qww5qopg" path="res://addons/macchi's_nodecomponents/components/path_find_movement_component/path_find_movement_component.tscn" id="5_epl30"]
[ext_resource type="Script" path="res://addons/godot_state_charts/parallel_state.gd" id="6_nd87m"]
[ext_resource type="Script" path="res://addons/godot_state_charts/transition.gd" id="7_kiuy1"]
[ext_resource type="Script" path="res://addons/godot_state_charts/atomic_state.gd" id="8_ued26"]
[ext_resource type="PackedScene" uid="uid://b6l0q5hhqq12m" path="res://nodes/components/two_point_5d_node_simulator/two_point_5d_node_simulator.tscn" id="11_sgbnk"]

[node name="EntityNode" type="CharacterBody2D" node_paths=PackedStringArray("state_chart", "hitbox", "interactable_box") groups=["Entity"]]
script = ExtResource("1_ljx5x")
state_chart = NodePath("StateChart")
hitbox = NodePath("Hitbox")
interactable_box = NodePath("InteractableBox")

[node name="InteractableBox" parent="." instance=ExtResource("2_s834e")]

[node name="Hitbox" parent="." instance=ExtResource("2_qnb1g")]

[node name="StateChart" type="Node" parent="."]
script = ExtResource("3_pi3qr")

[node name="Root" type="Node" parent="StateChart"]
script = ExtResource("5_d0dfx")
initial_state = NodePath("Enabled")

[node name="Enabled" type="Node" parent="StateChart/Root"]
script = ExtResource("6_nd87m")

[node name="OnDisabled" type="Node" parent="StateChart/Root/Enabled"]
script = ExtResource("7_kiuy1")
to = NodePath("../../Disabled")
event = &"disabled"

[node name="Disabled" type="Node" parent="StateChart/Root"]
script = ExtResource("8_ued26")

[node name="OnEnabled" type="Node" parent="StateChart/Root/Disabled"]
script = ExtResource("7_kiuy1")
to = NodePath("../../Enabled")
event = &"enabled"

[node name="Animation" type="Node" parent="StateChart/Root"]
script = ExtResource("5_d0dfx")

[node name="Components" type="Node" parent="."]

[node name="Movement" type="Node" parent="Components"]

[node name="Walk" parent="Components/Movement" node_paths=PackedStringArray("body") instance=ExtResource("4_wexpm")]
body = NodePath("../../..")
speed = 5.0

[node name="PathFindMovementComponent" parent="Components/Movement" node_paths=PackedStringArray("movement", "navigation_agent") instance=ExtResource("5_epl30")]
movement = NodePath("../Walk")
navigation_agent = NodePath("../../../NavigationAgent2D")

[node name="TwoPoint5DNodeSimulator" parent="Components" node_paths=PackedStringArray("node", "movement") instance=ExtResource("11_sgbnk")]
node = NodePath("../..")
movement = NodePath("../Movement/Walk")

[node name="Audio" type="Node2D" parent="."]

[node name="Sprites" type="Node2D" parent="."]

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="."]

[connection signal="velocity_computed" from="NavigationAgent2D" to="Components/Movement/PathFindMovementComponent" method="_on_navigation_agent_2d_velocity_computed"]
